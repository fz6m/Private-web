!function(root,factory){"object"==typeof exports?module.exports=factory():"function"==typeof define&&define.amd?define("Typing",[],(function($){return root.Typing=factory($)})):root.Typing=factory()}(this,(function(){function Typing(opts){this.opts=opts||{},this.source=opts.source,this.output=opts.output,this.delay=opts.delay||120,this.chain={parent:null,dom:this.output,val:[]},this._stop=!0,"function"!=typeof this.opts.done&&(this.opts.done=function(){})}return Typing.fn=Typing.prototype={toArray:function(eles){for(var result=[],i=0;i<eles.length;i++)result.push(eles[i]);return result},init:function(){this.chain.val=this.convert(this.source,this.chain.val)},convert:function(dom,arr){for(var that=this,children=this.toArray(dom.childNodes),i=0;i<children.length;i++){var node=children[i];if(3===node.nodeType)arr=arr.concat(node.nodeValue.split(""));else if(1===node.nodeType){var val=[];val=this.convert(node,val),arr.push({dom:node,val:val})}}return arr},print:function(dom,val,callback){setTimeout((function(){dom.appendChild(document.createTextNode(val)),callback()}),this.delay)},play:function(ele){if(!this._stop&&ele)if(ele.val.length){var curr=ele.val.shift(),that=this;if("string"==typeof curr)this.print(ele.dom,curr,(function(){that.play(ele)}));else{for(var dom=document.createElement(curr.dom.nodeName),attrs=that.toArray(curr.dom.attributes),i=0;i<attrs.length;i++){var attr=attrs[i];dom.setAttribute(attr.name,attr.value)}ele.dom.appendChild(dom),curr.parent=ele,curr.dom=dom,this.play(curr.val.length?curr:curr.parent)}}else ele.parent?this.play(ele.parent):this.opts.done()},start:function(){this._stop=!1,this.init(),this.play(this.chain)},pause:function(){this._stop=!0},resume:function(){this._stop=!1,this.play(this.chain)}},Typing.version="2.1",Typing})),$(setTimeout((function(){var typing;new Typing({source:document.getElementById("source"),output:document.getElementById("output"),delay:200}).start()}),1e3));